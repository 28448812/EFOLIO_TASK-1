import{r,k as b,o as c,c as h,b as e,t as a,e as k,d as x,l as W,v as B,m as N,q as p}from"./index-9048f058.js";import{L as $}from"./LogoutButton-f960b0da.js";import{a as v}from"./axios-edfcd65b.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import"./auth-66a0fa4c.js";const I={class:"weather-search-container"},S={class:"weather-header"},V={class:"userWrip"},E={class:"username-display"},M={class:"weather-content"},P={class:"search-section"},q={class:"input-group"},D=["disabled"],K={key:0,class:"error-message"},L={key:1,class:"weather-result"},R={class:"weather-card"},A={class:"weather-header-info"},T={class:"city-name"},U={class:"temperature"},j={class:"weather-details"},z={class:"weather-main"},F={class:"weather-icon"},H=["src","alt"],Y={class:"weather-description"},G={class:"weather-stats"},J={class:"stat-item"},O={class:"stat-value"},Q={class:"stat-item"},X={class:"stat-value"},Z={class:"stat-item"},ee={class:"stat-value"},se={class:"stat-item"},te={class:"stat-value"},ae={class:"stat-item"},oe={class:"stat-value"},ie={__name:"Weather",setup(ne){const n=r(""),t=r(null),l=r(!1),i=r(""),m=localStorage.getItem("userName"),u="4e8f8e3b62bddf5018c441ed2bb8181a",_=async()=>{var d,s;if(!n.value.trim()){i.value="Please enter city name";return}l.value=!0,i.value="",t.value=null;try{const o=await v.get(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(n.value)}&appid=${u}`);if(!o.data||o.data.length===0)throw new Error("The city was not found. Please check if the city name is correct.");const w=o.data[0],{lat:y,lon:g}=w,f=await v.get(`https://api.openweathermap.org/data/2.5/weather?lat=${y}&lon=${g}&appid=${u}&units=metric&lang=zh_cn`);t.value=f.data}catch(o){i.value=((s=(d=o.response)==null?void 0:d.data)==null?void 0:s.message)||o.message||"Failed to obtain weather information"}finally{l.value=!1}};return b(()=>{}),(d,s)=>(c(),h("div",I,[e("div",S,[s[1]||(s[1]=e("h1",{class:"main-title"},"Weather query",-1)),e("div",V,[e("div",E,a(k(m)),1),x($)])]),e("div",M,[e("div",P,[e("div",q,[W(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),type:"text",placeholder:"Enter the city name (eg Beijing, Shanghai, London)",class:"search-input",onKeyup:N(_,["enter"])},null,544),[[B,n.value]]),e("button",{onClick:_,class:"search-btn",disabled:l.value},a(l.value?"Searching...":"Search"),9,D)])]),i.value?(c(),h("div",K,a(i.value),1)):p("",!0),t.value?(c(),h("div",L,[e("div",R,[e("div",A,[e("h2",T,a(t.value.name)+", "+a(t.value.sys.country),1),e("div",U,a(Math.round(t.value.main.temp))+"°C",1)]),e("div",j,[e("div",z,[e("div",F,[e("img",{src:`https://openweathermap.org/img/wn/${t.value.weather[0].icon}@2x.png`,alt:t.value.weather[0].description},null,8,H)]),e("div",Y,a(t.value.weather[0].description),1)]),e("div",G,[e("div",J,[s[2]||(s[2]=e("span",{class:"stat-label"},"Body temperature:",-1)),e("span",O,a(Math.round(t.value.main.feels_like))+"°C",1)]),e("div",Q,[s[3]||(s[3]=e("span",{class:"stat-label"},"Humidity:",-1)),e("span",X,a(t.value.main.humidity)+"%",1)]),e("div",Z,[s[4]||(s[4]=e("span",{class:"stat-label"},"Air pressure:",-1)),e("span",ee,a(t.value.main.pressure)+" hPa",1)]),e("div",se,[s[5]||(s[5]=e("span",{class:"stat-label"},"Wind speed:",-1)),e("span",te,a(t.value.wind.speed)+" m/s",1)]),e("div",ae,[s[6]||(s[6]=e("span",{class:"stat-label"},"Visibility:",-1)),e("span",oe,a(t.value.visibility/1e3)+" km",1)])])])])])):p("",!0)])]))}},ue=C(ie,[["__scopeId","data-v-dadee2d6"]]);export{ue as default};
